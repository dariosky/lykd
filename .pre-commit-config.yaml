repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.12.7
    hooks:
      - id: ruff
        name: ruff lint
        files: ^backend/
        args: [--fix]
      - id: ruff-format
        name: ruff format
        files: ^backend/

  - repo: local
    hooks:
      - id: prettier
        name: prettier
        entry: bash -c 'cd frontend && npm run format:staged'
        language: system
        files: ^frontend/.*\.(js|jsx|ts|tsx|json|css|html)$
        pass_filenames: false
      - id: backend-tests
        name: backend tests
        entry: bash -c 'cd backend && python -m pytest'
        language: system
        files: ^backend/
        pass_filenames: false
      - id: frontend-tests
        name: frontend tests
        entry: bash -c 'cd frontend && npm test -- --run'
        language: system
        files: ^frontend/
        pass_filenames: false
  - repo: https://github.com/PyCQA/bandit
    rev: '1.8.6'
    hooks:
      - id: bandit
        args: [ "-c", "pyproject.toml", "-r", "backend" ]
        additional_dependencies: [ "bandit[toml]" ]
